# sfa deals with testing on_success, on_failure, always
jobs:
  - name: x86-64-windows-server-2016-host-sfa-on-success
    type: runSh
    runtime:
      architecture: x86_64
      nodePool: custom__x86_64__WindowsServer_2016
      container: false
    flags:
      - x86-64
      - windows-server-2016
      - x86-64-windows-server-2016-host-sfa
    steps:
      - IN: x86-64-trigger
      - IN: windows-server-2016-trigger
      - TASK:
          name: shipctl-should-work
          script:
            - dir
    on_success:
      - script: echo "this should be logged"

  - name: x86-64-windows-server-2016-host-sfa-on-failure
    type: runSh
    runtime:
      architecture: x86_64
      nodePool: custom__x86_64__WindowsServer_2016
      container: false
    flags:
      - x86-64
      - windows-server-2016
    steps:
      - IN: x86-64-trigger
      - IN: windows-server-2016-trigger
      - TASK:
          name: shipctl-should-work
          script:
            - invalidCommand
    on_failure:
      - script: echo "this should be logged"

  - name: x86-64-windows-server-2016-host-sfa-on-success-always
    type: runSh
    runtime:
      architecture: x86_64
      nodePool: custom__x86_64__WindowsServer_2016
      container: false
    flags:
      - x86-64
      - windows-server-2016
      - x86-64-windows-server-2016-host-sfa
    steps:
      - IN: x86-64-trigger
      - IN: windows-server-2016-trigger
      - TASK:
          name: shipctl-should-work
          script:
            - dir
    on_success:
      - script: echo "this should be logged"
    always:
      - script: echo "this is always script"

  - name: x86-64-windows-server-2016-host-sfa-on-failure-always
    type: runSh
    runtime:
      architecture: x86_64
      nodePool: custom__x86_64__WindowsServer_2016
      container: false
    flags:
      - x86-64
      - windows-server-2016
      - x86-64-windows-server-2016-host-sfa
    steps:
      - IN: x86-64-trigger
      - IN: windows-server-2016-trigger
      - TASK:
          name: shipctl-should-work
          script:
            - invalidCommand
    on_failure:
      - script: echo "this should be logged"
    always:
      - script: echo "this is always script"

  - name: x86-64-windows-server-2016-host-sfa-on-success-invalid-command
    type: runSh
    runtime:
      architecture: x86_64
      nodePool: custom__x86_64__WindowsServer_2016
      container: false
    flags:
      - x86-64
      - windows-server-2016
      - x86-64-windows-server-2016-host-sfa
    steps:
      - IN: x86-64-trigger
      - IN: windows-server-2016-trigger
      - TASK:
          name: shipctl-should-work
          script:
            - dir
    on_success:
      - script: echo "this should be shown"
      - script: invalidCommand
      - script: echo "this should be shown"
      - script: echo "build status should be success"
